var Independence = (function(){function m(a,b,c){this.x=a;this.y=b;this.opacity=.5;this.o=2+Math.random();this.t=c}function l(){this.speed=2.5;this.h=null;this.s=this.r=this.y=this.x=0}function f(a,b,c,d,e,f){this.w=a;this.x=b;this.y=c;this.i=e;this.j=f;this.e=[];this.C=d;this.l=!1;this.g=new l;return this}function r(a){var b=.5<Math.random()?!0:!1,c=b?a.a.canvas.height:10+(a.a.canvas.height-10)*Math.random(),b=b?(a.a.canvas.width/2-10)*Math.random():10,d=new g(b,c);d.k(0,0,"255, 153, 51");d.k(50,-50,"222, 222, 222");
d.k(100,0,"0, 128, 0");d.q(a.a.canvas.width-b,a.a.canvas.height-c,3*(1 + Math.random()));return d}function g(a,b){this.x=a;this.y=b;this.c=[]}function h(a){this.canvas=a;this.a=a.getContext("2d");this.d=[];this.B=1E3;this.b=this.paused=!1;return this}Function.prototype.bind=Function.prototype.bind||function(a){var b=this;return function(){return b.apply(a,arguments)}};var n=document.documentElement,p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){setTimeout(a,
17)},q=Math.PI/2,k={};h.prototype.frame=function(){if(!this.b){this.a.clearRect(0,0,this.a.canvas.width,this.a.canvas.height);for(var a in this.d)!0==this.d[a].b?this.d.splice(a,1):this.d[a].p(this.a);if(0==this.d.length){var b=this;setTimeout(function(){b.u();b.frame()},this.B)}else this.paused||p(this.frame.bind(this))}};h.prototype.u=function(){this.d.push(r(this))};h.prototype.f=function(){this.b=!0;this.d=[]};g.prototype.k=function(a,b,c){this.c.push(new f(k.n,this.x+a,this.y+b,c,a,b))};g.prototype.q=
function(a,b,c){var d,e;for(e in this.c)d=this.c[e],d.q(d.i+a,d.j+b,c)};g.prototype.p=function(a){for(var b in this.c)this.c[b].b?this.c.splice(b,1):this.c[b].p(a);0==this.c.length&&this.f()};g.prototype.f=function(){this.b=!0};f.prototype.m=function(a){a.save();var b=Math.atan(this.g.h)+q;a.translate(this.x,this.y);a.rotate(b);a.drawImage(this.w,0,0);a.restore();for(var c in this.e)!0==this.e[c].b?this.e.splice(c,1):this.e[c].m(a)};f.prototype.q=function(a,b,c){this.g.v(this.x,this.y,a,b,c)};f.prototype.p=
function(a){this.g.move();var b=Math.atan(this.g.h)+q,c=-this.j+this.i*Math.sin(b)+this.j*Math.cos(b);this.x=this.g.x+(-this.i+this.i*Math.cos(b)-this.j*Math.sin(b));this.y=this.g.y+c;100>this.e.length&&!this.l&&this.e.push(new m(this.x+((11+2*Math.random())*Math.cos(b)-(29+4*Math.random())*Math.sin(b)),this.y+((11+2*Math.random())*Math.sin(b)+(29+4*Math.random())*Math.cos(b)),this.C));this.m(a);(this.l=this.x>a.canvas.width+50||this.y>a.canvas.height+50||-50>this.x||-50>this.y?!0:!1)&&0==this.e.length&&
this.f()};f.prototype.f=function(){this.b=!0};l.prototype.v=function(a,b,c,d,e){this.x=a;this.y=b;this.r=c-a;this.s=d-b;this.h=this.s/this.r;this.speed=e};l.prototype.move=function(){this.x+=Math.cos(Math.atan(this.h))*this.speed;this.y+=Math.sin(Math.atan(this.h))*this.speed};m.prototype.m=function(a){a.save();a.beginPath();a.fillStyle="rgba("+this.t+","+this.opacity+")";a.shadowColor="rgba("+this.t+",1)";a.arc(this.x,this.y,this.o,0,2*Math.PI,!0);a.fill();this.o+=.05;this.opacity-=.005;0>=this.opacity&&
(this.b=!0);a.restore()};var e;return{start:function(a){var b=document.createElement("canvas");b.id="canvas_doodle";b.height=window.innerHeight||n.clientHeight;b.width=window.innerWidth||n.clientWidth;var c=b.style;c.position="fixed";c.top=0;c.left=0;c.zIndex=1138;c.pointerEvents="none";document.body.appendChild(b);e=new h(b);k.n=new Image;k.n.src=a;k.n.onload=function(){e.u();p(e.frame.bind(e))}},destroy:function(){e.f();setTimeout(function(){document.body.removeChild(document.getElementById("canvas_doodle"))},
50);delete e}}})();